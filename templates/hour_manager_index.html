{% extends 'base.html' %}
{% load static %}

{% block title %}
    Hour Manager
{% endblock %}

{% block links %}
<!-- <script src="http://cdn.jtsage.com/jtsage-datebox/latest/jtsage-datebox.jqueryui.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://cdn.jtsage.com/jtsage-datebox/latest/jtsage-datebox.jqueryui.min.css" /> -->
<!-- development version, includes helpful console warnings -->
<script>
  var SEARCH  = "#search";
  var SHIFT   = "#shifts";
  var selectedShifts = [];

  function createHour(data) {
    return `
      <div class="item">
        <i class="large github middle aligned icon"></i>
        <div class="content">
          <a class="header">` + toTitleCase(data.day_of_week) + `</a>
          <div class="description">` + moment(data.datetime).format('h:mm a') + `</div>
        </div>
      </div>
    `;
  }

  function checkShifts() {
    var date = $(SEARCH).val();
    var data = {
      start: date,
      end: date
    }
    
    $.ajax({
      url: '/shifts/api/get_shifts/',
      data: data,
      success: function(data) {
        if (data.success) {
          $(SHIFT).empty();
          data.success.forEach(function (hour) {
            $(SHIFT).append(createHour(hour))
          })
        } else {
          console.log("Failed.")
        }
      }
    })
  }

</script>
{% endblock %}

{% block content %}
<div class='centered row'>
  <div class='center aligned column'>
    <div class='ui segment' style="padding: 0px;">
      <div class="ui attached action input" style="width: 100%; height: 100px; font-size: 50px;">
        <input type="text" placeholder="Enter a date..." id='search' style="border: 0px none; padding: 0px;">
        <button class="ui button" onclick="checkShifts();">
          Search
        </button>
      </div>
      <div class="ui stackable two column grid">
          <div class="column">
            <h1>Hello</h1>
          </div>
          <div class="column">
            <h1>Hello</h1>
          </div>
        </div>
      <div class='ui attached'>
        <div class="ui huge relaxed divided selection list" id='shifts'>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}